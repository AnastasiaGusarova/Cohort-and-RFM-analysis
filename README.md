# Cohort-and-RFM-analysis
## Проект e-commerce:
Условие:
Продакт-менеджер Василий попросил вас проанализировать совершенные покупки и ответить на следующие вопросы:
- Сколько у нас пользователей, которые совершили покупку только один раз?
- Сколько заказов в месяц в среднем не доставляется по разным причинам (вывести детализацию по причинам)?
- По каждому товару определить, в какой день недели товар чаще всего покупается.
- Сколько у каждого из пользователей в среднем покупок в неделю (по месяцам)? Не стоит забывать, что внутри месяца может быть не целое количество недель. Например, в ноябре 2021 года 4,28 недели. И внутри метрики это нужно учесть.
- Используя pandas, проведи когортный анализ пользователей. В период с января по декабрь выяви когорту с самым высоким retention на 3й месяц. 
- Используя python, построй RFM-сегментацию пользователей, чтобы качественно оценить свою аудиторию. В кластеризации можешь выбрать следующие метрики: R - время от последней покупки пользователя до текущей даты, F - суммарное количество покупок у пользователя за всё время, M - сумма покупок за всё время. Подробно опиши, как ты создавал кластеры. 
Входные данные:
olist_customers_datase.csv — таблица с уникальными идентификаторами пользователей
olist_orders_dataset.csv — таблица заказов
olist_order_items_dataset.csv — товарные позиции, входящие в заказы
Уникальные статусы заказов в таблице olist_orders_dataset:
created — создан; approved — подтверждён; invoiced — выставлен счёт; processing — в процессе сборки заказа; shipped — отгружен со склада; delivered — доставлен пользователю; unavailable — недоступен; canceled — отменён.

Требование к ответу:
Для решения задачи проведи предварительное исследование данных и сформулируй, что должно считаться покупкой. Обосновать свой выбор ты можешь с помощью фактов оплат, статусов заказов и других имеющихся данных.

## Решение:

- Покупка: order_purchase_timestamp и фильтрация по статусы 'canceled' и  'unavailable' и order_approved_at без пустых значений. 
- Из 95420 пользователей, 83168 пользователя совершили покупку только один раз. Для интернет магазина это плохой показатель, очень высокий отток клиентов.
- В среднем 25 заказов в месяц не были доставленны. 24,6 заказов в месяц не доставляются по причине отмены и 3,5 по причине недоступности.
- Среднее по покупкам в неделю (по месяцам) по всем покупателям 1.14. 
- Когорта с самым высоким retention на 3й месяц за 2017 год у покупателей, которые совершили первую покупку 2017-05. Retention rate составляет 0.48%
![Image retention matrix](https://github.com/AnastasiaGusarova/Cohort-and-RFM-analysis/blob/main/Cohort.png)


- RFM анализ: 
    - Пользователи c рангом 434 покупали один раз очень давно и на маленькую сумму.
    - Пользователи с рангом 111 покупают часто, на большую сумму и последнии покупки были недавно. Frequency, в нашем случае, это клиенты у которых было более 3 покупок, и не важно что в одно время совершены. Можно считать что 161 покупатель из всей нашей базы отвечает признакам хорошего и лояльного покупателя.
    - В целом, данные не подходят для RFM анализа, слишком много пользователей с одной покупкой, покупатели не возвращаются за последующими покупками. Анализ в плане частоты покупок получается не информативным.
![Image count RFM rangs](https://github.com/AnastasiaGusarova/Cohort-and-RFM-analysis/blob/main/RFM.png)
